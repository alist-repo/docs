import{d as C,a0 as S,L as i,M as v,a1 as b,O as B,_ as V,P as c,o as f,g as a,a as n,Q as g,c as x,f as t,R as u,e as k,a2 as z}from"./app-ChJA9yCn.js";import{B as O}from"./Button-RQT0SqRp.js";import{N as P}from"./Alert-BMiKle4X.js";import{N as j}from"./Input-DcpdH3y4.js";const I=C({__name:"Token",setup(_,{expose:r}){r();const s=S({phone:"",password:"",verify_code:""}),e=i(),p=i(),d=i(),o=i(),y=i();async function m(){d.value=!0;const l=await(await fetch(`${v()}/alist/wopan/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(d.value=!1,l.error){e.value=l.error;return}}async function T(){o.value=!0;const l=await(await fetch(`${v()}/alist/wopan/verify_code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(o.value=!1,l.error){p.value=l.error;return}y.value=l}const N={input:s,err1:e,err2:p,loading1:d,loading2:o,token:y,getVerifyCode:m,getToken:T,get NInput(){return j},get NSpace(){return B},get NButton(){return O},get NAlert(){return P},get NTag(){return b}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}});function A(_,r,s,e,p,d){return f(),c(e.NSpace,{size:"large",vertical:""},{default:a(()=>[n(e.NInput,{size:"large",placeholder:"Phone number",value:e.input.phone,"onUpdate:value":r[0]||(r[0]=o=>e.input.phone=o)},null,8,["value"]),n(e.NInput,{size:"large",placeholder:"Password",value:e.input.password,"onUpdate:value":r[1]||(r[1]=o=>e.input.password=o),type:"password"},null,8,["value"]),n(e.NButton,{type:"primary",secondary:"",size:"large",block:"",onClick:e.getVerifyCode,loading:e.loading1},{default:a(()=>r[3]||(r[3]=[t("Get Verify Code ")])),_:1},8,["loading"]),e.err1?(f(),c(e.NAlert,{key:0,title:"Error",type:"error"},{default:a(()=>[t(u(e.err1),1)]),_:1})):g("",!0),n(e.NInput,{size:"large",placeholder:"Verify code",value:e.input.verify_code,"onUpdate:value":r[2]||(r[2]=o=>e.input.verify_code=o)},null,8,["value"]),n(e.NButton,{type:"primary",size:"large",block:"",onClick:e.getToken,loading:e.loading2},{default:a(()=>r[4]||(r[4]=[t("Get Token")])),_:1},8,["loading"]),e.err2?(f(),c(e.NAlert,{key:1,title:"Error",type:"error"},{default:a(()=>[t(u(e.err2),1)]),_:1})):g("",!0),e.token?(f(),x(z,{key:2},[k("div",null,[r[5]||(r[5]=t("refresh_token: ")),n(e.NTag,{bordered:!1,type:"info"},{default:a(()=>[t(u(e.token.refresh_token),1)]),_:1})]),k("div",null,[r[6]||(r[6]=t("access_token: ")),n(e.NTag,{bordered:!1,type:"info"},{default:a(()=>[t(u(e.token.access_token),1)]),_:1})])],64)):g("",!0)]),_:1})}const J=V(I,[["render",A],["__file","Token.vue"]]);export{J as T};
